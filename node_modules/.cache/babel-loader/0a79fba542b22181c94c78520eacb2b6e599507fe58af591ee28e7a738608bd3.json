{"ast":null,"code":"import { cancel } from \"./utils.js\";\nconst queue = [];\nconst queueListeners = [];\nexport function clearQueue(cancelSpeech = false, start = 0, emitEvent = false) {\n  if (cancelSpeech) cancel();\n  queue.slice(start).forEach(({\n    setSpeechStatus\n  }) => setSpeechStatus(\"stopped\"));\n  queue.length = 0;\n  if (emitEvent) emit();\n}\nexport function addToQueue(item, callback) {\n  queue.push(item);\n  emit(callback);\n}\nexport const clearQueueHook = () => clearQueue(true, 1, true);\nexport const clearQueueUnload = () => clearQueue(true, 1);\nexport function dequeue(index = 0) {\n  if (index === 0) cancel();else removeFromQueue(index);\n}\nexport function emit(callback) {\n  const utteranceQueue = queue.map(({\n    utterance\n  }) => utterance);\n  queueListeners.forEach(listener => listener(utteranceQueue));\n  callback === null || callback === void 0 ? void 0 : callback(utteranceQueue);\n}\nexport function removeFromQueue(utterance, callback) {\n  const index = typeof utterance === \"number\" ? utterance : queue.findIndex(item => item.utterance === utterance);\n  if (index === -1) return;\n  const [item] = queue.splice(index, 1);\n  if (item) {\n    item.setSpeechStatus(\"stopped\");\n    emit(callback);\n  }\n}\nexport function speakFromQueue() {\n  const item = queue[0];\n  if (item) window.speechSynthesis.speak(item.utterance);\n}\nexport function subscribe(callback) {\n  queueListeners.push(callback);\n  return () => {\n    const index = queueListeners.indexOf(callback);\n    if (index !== -1) queueListeners.splice(index, 1);\n  };\n}","map":{"version":3,"names":["cancel","queue","queueListeners","clearQueue","cancelSpeech","start","emitEvent","slice","forEach","setSpeechStatus","length","emit","addToQueue","item","callback","push","clearQueueHook","clearQueueUnload","dequeue","index","removeFromQueue","utteranceQueue","map","utterance","listener","findIndex","splice","speakFromQueue","window","speechSynthesis","speak","subscribe","indexOf"],"sources":["C:/Users/jelan/Downloads/stream-ui/node_modules/react-text-to-speech/dist/queue.js"],"sourcesContent":["import { cancel } from \"./utils.js\";\nconst queue = [];\nconst queueListeners = [];\nexport function clearQueue(cancelSpeech = false, start = 0, emitEvent = false) {\n    if (cancelSpeech)\n        cancel();\n    queue.slice(start).forEach(({ setSpeechStatus }) => setSpeechStatus(\"stopped\"));\n    queue.length = 0;\n    if (emitEvent)\n        emit();\n}\nexport function addToQueue(item, callback) {\n    queue.push(item);\n    emit(callback);\n}\nexport const clearQueueHook = () => clearQueue(true, 1, true);\nexport const clearQueueUnload = () => clearQueue(true, 1);\nexport function dequeue(index = 0) {\n    if (index === 0)\n        cancel();\n    else\n        removeFromQueue(index);\n}\nexport function emit(callback) {\n    const utteranceQueue = queue.map(({ utterance }) => utterance);\n    queueListeners.forEach((listener) => listener(utteranceQueue));\n    callback === null || callback === void 0 ? void 0 : callback(utteranceQueue);\n}\nexport function removeFromQueue(utterance, callback) {\n    const index = typeof utterance === \"number\" ? utterance : queue.findIndex((item) => item.utterance === utterance);\n    if (index === -1)\n        return;\n    const [item] = queue.splice(index, 1);\n    if (item) {\n        item.setSpeechStatus(\"stopped\");\n        emit(callback);\n    }\n}\nexport function speakFromQueue() {\n    const item = queue[0];\n    if (item)\n        window.speechSynthesis.speak(item.utterance);\n}\nexport function subscribe(callback) {\n    queueListeners.push(callback);\n    return () => {\n        const index = queueListeners.indexOf(callback);\n        if (index !== -1)\n            queueListeners.splice(index, 1);\n    };\n}\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,YAAY;AACnC,MAAMC,KAAK,GAAG,EAAE;AAChB,MAAMC,cAAc,GAAG,EAAE;AACzB,OAAO,SAASC,UAAUA,CAACC,YAAY,GAAG,KAAK,EAAEC,KAAK,GAAG,CAAC,EAAEC,SAAS,GAAG,KAAK,EAAE;EAC3E,IAAIF,YAAY,EACZJ,MAAM,CAAC,CAAC;EACZC,KAAK,CAACM,KAAK,CAACF,KAAK,CAAC,CAACG,OAAO,CAAC,CAAC;IAAEC;EAAgB,CAAC,KAAKA,eAAe,CAAC,SAAS,CAAC,CAAC;EAC/ER,KAAK,CAACS,MAAM,GAAG,CAAC;EAChB,IAAIJ,SAAS,EACTK,IAAI,CAAC,CAAC;AACd;AACA,OAAO,SAASC,UAAUA,CAACC,IAAI,EAAEC,QAAQ,EAAE;EACvCb,KAAK,CAACc,IAAI,CAACF,IAAI,CAAC;EAChBF,IAAI,CAACG,QAAQ,CAAC;AAClB;AACA,OAAO,MAAME,cAAc,GAAGA,CAAA,KAAMb,UAAU,CAAC,IAAI,EAAE,CAAC,EAAE,IAAI,CAAC;AAC7D,OAAO,MAAMc,gBAAgB,GAAGA,CAAA,KAAMd,UAAU,CAAC,IAAI,EAAE,CAAC,CAAC;AACzD,OAAO,SAASe,OAAOA,CAACC,KAAK,GAAG,CAAC,EAAE;EAC/B,IAAIA,KAAK,KAAK,CAAC,EACXnB,MAAM,CAAC,CAAC,CAAC,KAEToB,eAAe,CAACD,KAAK,CAAC;AAC9B;AACA,OAAO,SAASR,IAAIA,CAACG,QAAQ,EAAE;EAC3B,MAAMO,cAAc,GAAGpB,KAAK,CAACqB,GAAG,CAAC,CAAC;IAAEC;EAAU,CAAC,KAAKA,SAAS,CAAC;EAC9DrB,cAAc,CAACM,OAAO,CAAEgB,QAAQ,IAAKA,QAAQ,CAACH,cAAc,CAAC,CAAC;EAC9DP,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,QAAQ,CAACO,cAAc,CAAC;AAChF;AACA,OAAO,SAASD,eAAeA,CAACG,SAAS,EAAET,QAAQ,EAAE;EACjD,MAAMK,KAAK,GAAG,OAAOI,SAAS,KAAK,QAAQ,GAAGA,SAAS,GAAGtB,KAAK,CAACwB,SAAS,CAAEZ,IAAI,IAAKA,IAAI,CAACU,SAAS,KAAKA,SAAS,CAAC;EACjH,IAAIJ,KAAK,KAAK,CAAC,CAAC,EACZ;EACJ,MAAM,CAACN,IAAI,CAAC,GAAGZ,KAAK,CAACyB,MAAM,CAACP,KAAK,EAAE,CAAC,CAAC;EACrC,IAAIN,IAAI,EAAE;IACNA,IAAI,CAACJ,eAAe,CAAC,SAAS,CAAC;IAC/BE,IAAI,CAACG,QAAQ,CAAC;EAClB;AACJ;AACA,OAAO,SAASa,cAAcA,CAAA,EAAG;EAC7B,MAAMd,IAAI,GAAGZ,KAAK,CAAC,CAAC,CAAC;EACrB,IAAIY,IAAI,EACJe,MAAM,CAACC,eAAe,CAACC,KAAK,CAACjB,IAAI,CAACU,SAAS,CAAC;AACpD;AACA,OAAO,SAASQ,SAASA,CAACjB,QAAQ,EAAE;EAChCZ,cAAc,CAACa,IAAI,CAACD,QAAQ,CAAC;EAC7B,OAAO,MAAM;IACT,MAAMK,KAAK,GAAGjB,cAAc,CAAC8B,OAAO,CAAClB,QAAQ,CAAC;IAC9C,IAAIK,KAAK,KAAK,CAAC,CAAC,EACZjB,cAAc,CAACwB,MAAM,CAACP,KAAK,EAAE,CAAC,CAAC;EACvC,CAAC;AACL","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}